# Data Modeling Overview

## What Was Actually Done

Data models were designed across multiple domains, with particular focus on higher education (Education Cloud) and public sector implementations. The models support complex relationships between people, organizations, programs, applications, and transactions.

### Higher Education Data Model

The Education Cloud data model was customized to support:

- Contacts as the primary student/applicant record
- Program Enrollment and Course Enrollment objects to represent academic participation
- Application objects representing one or multiple applications per student
- Custom fields for program modalities (online, hybrid, in-person), program levels (undergrad, grad, non-degree), and special program types
- Derived fields like "last three enrolled terms" computed from SIS data

### Public Sector Data Model

The public sector data model supports:

- Client Accounts/Contacts representing individual citizens/clients (potentially person-style accounts)
- Vendor (provider) Accounts for organizations providing services
- Vendor Contacts for staff working for provider organizations
- Staff Contacts and Users for internal employees
- Cases as primary records for ongoing service/benefits activity
- Custom Notice objects mirroring notices generated by external systems
- Custom Transaction objects mirroring transactions logged by external engines

### External ID Strategy

External IDs were designed to support stable record mapping:

- Account-level external IDs using composite keys (e.g., Institution + Program + Effective Date)
- External IDs mirroring external system primary keys for consistency
- Additional fields tracking data sync timestamps and integration job IDs
- Supports idempotent upserts from ETL processes

### Data Quality and Deduplication

Data quality tools were integrated to manage:

- Lead-to-contact conversions for specific lead types
- Real-time matching and deduplication
- Error capture when conversion fails (missing default record types, configuration mismatches)
- SOQL queries on history objects and error fields to diagnose issues

## Rules and Patterns

### Person and Organization Modeling

- Use Contact as the core person record across all domains
- Use Account for organizations (business accounts, vendor organizations, internal departments)
- Consider person-style accounts for 1:1 Account-Contact relationships when needed
- Use Record Types to differentiate between person types (client, vendor, staff)
- Design relationship objects for person-to-person and person-to-organization relationships

### External ID Design

- Always use external IDs for objects that receive data from integrations
- Design external IDs to be stable and unique (mirror external system primary keys)
- Use composite external IDs when external systems use multi-column keys
- Include timestamp fields to track last sync time
- Implement job tracking fields to correlate Salesforce records with external system jobs
- Document external ID strategy for each integrated object

### Data Synchronization Fields

Add these standard fields to all objects that receive data from integrations:
- `Last_Sync_Timestamp__c` (DateTime) - when record was last synced
- `Last_Sync_Status__c` (Picklist: Success, Error, In Progress) - sync job status
- `Last_Sync_Error__c` (Long Text Area) - error message if sync failed
- `Integration_Job_ID__c` (Text) - correlation ID with external system
- `Record_Source__c` (Picklist: Integration, Manual Entry, Migration) - how record was created

### Relationship Modeling

- Use standard relationships (Lookup, Master-Detail) where possible
- Create custom relationship objects for many-to-many relationships
- Include effective dates on relationship records when relationships change over time
- Use junction objects for complex many-to-many relationships with additional attributes

### Data Quality Patterns

- Integrate data quality tools for real-time matching and deduplication
- Capture conversion errors in custom fields for troubleshooting
- Use SOQL queries on history objects to track data changes
- Create test cases to replicate data quality errors
- Document data quality rules and matching criteria

## Suggested Improvements (From AI)

### Enhanced Relationship Modeling

Consider more sophisticated relationship modeling:
- Use relationship objects for all person-to-organization relationships (not just Account-Contact)
- Include role types, status, and effective dates on relationship records
- Support multiple roles per person-organization relationship
- Create relationship hierarchy views for complex organizational structures

### Data Lineage Tracking

Implement data lineage tracking:
- Custom objects to track data flow from source systems to Salesforce
- Field-level lineage showing which fields come from which systems
- Data quality metrics tracking accuracy and completeness
- Audit trails for data transformations

### Master Data Management

Consider master data management patterns:
- Identify system of record for each data domain
- Implement data governance rules for data ownership
- Create data stewardship processes for data quality
- Build data quality dashboards showing completeness and accuracy metrics

### Incremental Data Sync

Implement incremental synchronization:
- Track last modified timestamps in external systems
- Only sync records that have changed since last sync
- Use Change Data Capture (CDC) where available
- Implement delta detection logic to identify changed records

## To Validate

- Specific external ID field names and composite key structures
- Data sync timestamp field naming conventions
- Integration job tracking field implementations
- Data quality tool configuration and matching rules
- Relationship object structures and field definitions
- Derived field calculation logic (e.g., "last three enrolled terms")

